---
typora-root-url: ./
---

## 设计模式的分类

所有模式可以根据其意图或目的来分类。 本书覆盖了三种主要的模式类别：

- **创建型模式**提供创建对象的机制， 增加已有代码的灵活性和可复用性。

  - 简单工厂模式（Simple Factory）

    重要程度：4 （5为满分）

  - 工厂方法模式（Factory Method）

    重要程度：5

  - 抽象工厂模式（Abstract Factory）

    重要程度：5

  - 建造者模式（Builder）

    重要程度：2

  - 原型模式（Prototype）

    重要程度：3

  - 单例模式（Singleton）

    重要程度：4

- **结构型模式**介绍如何将对象和类组装成较大的结构， 并同时保持结构的灵活和高效。

- **行为模式**负责对象间的高效沟通和职责委派。

## UML类图

![uml_class_struct](/_static/uml_class_struct.jpg)

类图中各个类之间的关系：

- **泛化关系**(generalization)，如：SUV与小汽车。

  最终代码中，泛化关系表现为**继承非抽象类**。

  用一条带空心箭头的实线表示。

- **实现关系**(realize)，如：小汽车与车。

  最终代码中，实现关系表现为**继承抽象类**。

  用一条带空心箭头的虚线表示。

- **聚合关系(**aggregation)，用于表示实体对象之间的关系，表示整体由部分构成的语义，但整体和部分不是强依赖的，即使整体不存在了，部分仍然存在。

  如：部门由多个员工组成。

  用一条带空心菱形箭头的直线表示。

- **组合关系**(composition)，同样表示整体由部分构成的语义，但组合关系是一种强依赖的特殊聚合关系，如果整体不存在了，则部分也不存在了。

  如：公司由多个部门组成。

  用一条带实心菱形箭头直线表示。

- **关联关系**(association)，一般用来定义对象之间静态的、天然的结构，是一种“强关联”的关系。可以强调方向。

  如：乘车人与车票。

  最终代码中，关联对象通常是以成员变量的形式实现的。

  用一条直线表示。

- **依赖关系**(dependency)，描述一个对象在运行期间会用到另一个对象。与关联关系不同的是，它是一种临时性的关系，通常在运行期间产生，并且随着运行时的变化， 依赖关系也可能发生变化。双向依赖很糟糕，应该保持单向依赖。

  如：学生上学需要自行车。

  在最终代码中，依赖关系体现为类构造方法及类方法的传入参数，箭头的指向为调用关系。

  用一套带箭头的虚线表示。

## 时序图

时序图（Sequence Diagram）是显示对象之间交互的图，这些对象是按时间顺序排列的。时序图中显示的是参与交互的对象及其对象之间消息交互的顺序。

时序图包括的建模元素主要有：对象（Actor）、生命线（Lifeline）、控制焦点（Focus of control）、消息（Message）等等。

参考：https://www.cnblogs.com/a311300/p/4094547.html

## 简单工厂模式( Simple Factory Pattern )

简单工厂模式(Simple Factory Pattern)：又称为**静态工厂**方法(Static Factory Method)模式。在简单工厂模式中，可以根据参数的不同返回不同类的实例。简单工厂模式专门定义一个类来负责创建其他类的实例，被创建的实例通常都具有共同的父类。

模式结构：

- Factory：工厂角色

  工厂角色负责实现创建所有实例的内部逻辑，相当于**用户接口**，提供**静态方法**，根据不同参数创建不同实例。

- Product：抽象产品角色

  抽象产品角色是所创建的所有对象的父类，负责描述所有实例所共有的**公共接口**

- ConcreteProduct：具体产品角色

  具体产品角色是创建目标，所有创建的对象都充当这个角色的某个具体类的实例。**继承Product，实现具体细节**

模式分析：

- 将对象的创建和对象本身业务处理分离可以降低系统的耦合度，使得两者修改起来都相对容易。
- 使用简单，只需传参。
- 缺点：工厂类的职责相对过重，增加新的产品需要修改工厂类的判断逻辑

适用情况：

- 工厂类负责创建的对象比较少：由于创建的对象较少，不会造成工厂方法中的业务逻辑太过复杂。
- 客户端既不需要关心创建细节，甚至连类名都不需要记住，只需要知道类型所对应的参数。

##  工厂方法模式(Factory Method Pattern)

工厂方法模式(Factory Method Pattern)又称为工厂模式，也叫虚拟构造器(Virtual Constructor)模式或者多态工厂(Polymorphic Factory)模式。

工厂父类负责定义创建产品对象的公共接口，而工厂子类则负责生成具体的产品对象，这样做的目的是将产品类的实例化操作延迟到工厂子类中完成，即通过工厂子类来确定究竟应该实例化哪一个具体产品类。

模式结构：